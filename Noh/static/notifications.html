<!-- ì•Œë¦¼ í™•ì¸ í˜ì´ì§€ -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì•Œë¦¼ í™•ì¸</title>

</head>

<body>
    <h2>ë°›ì€ ìœ„ì¹˜ ê³µìœ  ìš”ì²­</h2>
    <button onclick="location.href='/static/button.html'"> í™ˆìœ¼ë¡œ </button>
    <br>
    <ul id="notificationList"></ul>

    <script>
        const jwt = localStorage.getItem("jwt_token");
        const list = document.getElementById("notificationList");

        // ì•Œë¦¼ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadNotifications() {
        list.innerHTML = '';
        const res = await fetch("/navigation/notifications", {
            headers: { "Authorization": "Bearer " + jwt }
        });
        if (!res.ok) return;
        const notifications = await res.json(); // [{id, from_id, email, timestamp}]
        for (const n of notifications) {
            const li = document.createElement("li");
            const time = new Date(n.timestamp).toLocaleString("ko-KR", { year: "numeric", month: "2-digit", day: "2-digit", hour: "2-digit", minute: "2-digit" });
            li.innerHTML = `[í ½íµ°ï¸: ${time}] <a href="/static/index2.html?from=${n.from_id}">${n.email} ë‹˜ì˜ ìœ„ì¹˜ ë³´ê¸°</a>`;
            list.appendChild(li);
        }
        }
        window.onload = loadNotifications;
    </script>
</body>
</html>
